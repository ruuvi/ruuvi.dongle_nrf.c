<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ruuvi.gateway_nrf.c: ruuvi.gateway_nrf.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ruuvi.gateway_nrf.c
   </div>
   <div id="projectbrief">Ruuvi Gateway nRF52 code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ruuvi.gateway_nrf.c </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Ruuvi Gateway nRF52 code</p>
<p><a href="https://travis-ci.org/ruuvi/ruuvi.gateway_nrf.c"><object type="image/svg+xml" data="https://travis-ci.org/ruuvi/ruuvi.gateway_nrf.c.svg?branch=master" style="pointer-events: none;">Build Status</object></a> <a href="https://sonarcloud.io/dashboard?id=ruuvi.gateway_nrf.c"><img src="https://sonarcloud.io/api/project_badges/measure?project=ruuvi.gateway_nrf.c&amp;metric=alert_status" alt="Quality Gate Status" class="inline"/></a> <a href="https://sonarcloud.io/dashboard?id=ruuvi.gateway_nrf.c"><img src="https://sonarcloud.io/api/project_badges/measure?project=ruuvi.gateway_nrf.c&amp;metric=bugs" alt="Bugs" class="inline"/></a> <a href="https://sonarcloud.io/dashboard?id=ruuvi.gateway_nrf.c"><img src="https://sonarcloud.io/api/project_badges/measure?project=ruuvi.gateway_nrf.c&amp;metric=code_smells" alt="Code Smells" class="inline"/></a> <a href="https://sonarcloud.io/dashboard?id=ruuvi.gateway_nrf.c"><img src="https://sonarcloud.io/api/project_badges/measure?project=ruuvi.gateway_nrf.c&amp;metric=coverage" alt="Coverage" class="inline"/></a> <a href="https://sonarcloud.io/dashboard?id=ruuvi.gateway_nrf.c"><img src="https://sonarcloud.io/api/project_badges/measure?project=ruuvi.gateway_nrf.c&amp;metric=duplicated_lines_density" alt="Duplicated Lines (%)" class="inline"/></a> <a href="https://sonarcloud.io/dashboard?id=ruuvi.gateway_nrf.c"><img src="https://sonarcloud.io/api/project_badges/measure?project=ruuvi.gateway_nrf.c&amp;metric=ncloc" alt="Lines of Code" class="inline"/></a> <a href="https://sonarcloud.io/dashboard?id=ruuvi.gateway_nrf.c"><img src="https://sonarcloud.io/api/project_badges/measure?project=ruuvi.gateway_nrf.c&amp;metric=sqale_rating" alt="Maintainability Rating" class="inline"/></a> <a href="https://sonarcloud.io/dashboard?id=ruuvi.gateway_nrf.c"><img src="https://sonarcloud.io/api/project_badges/measure?project=ruuvi.gateway_nrf.c&amp;metric=reliability_rating" alt="Reliability Rating" class="inline"/></a> <a href="https://sonarcloud.io/dashboard?id=ruuvi.gateway_nrf.c"><img src="https://sonarcloud.io/api/project_badges/measure?project=ruuvi.gateway_nrf.c&amp;metric=sqale_index" alt="Technical Debt" class="inline"/></a></p>
<h1>Setting up</h1>
<h2>SDK 15.3</h2>
<p>Download <a href="https://developer.nordicsemi.com/nRF5_SDK/nRF5_SDK_v15.x.x/">Nordic SDK15.3</a> and install it at the project root. If you're working on multiple nRF projects, you can (and should) use softlinking instead.</p>
<h2>Submodules</h2>
<p>Run <code>git submodule update --init --recursive</code>. This will search for and install the other git repositories referenced by this project. If any of the submodules has a changed remote, you'll need to run <code>git submodule sync --recursive</code> and again <code>git submodule update --init --recursive</code> to update the modules from new remotes.</p>
<h2>Toolchain</h2>
<p>ARMGCC is used for <a href="http://jenkins.ruuvi.com/job/ruuvi.gateway_nrf.c/">Jenkins builds</a>, it's recommended to use SES for developing.</p>
<p>Segger Embedded Studio can be set up by installing <a href="https://www.nordicsemi.com/?sc_itemid=%7BB935528E-8BFA-42D9-8BB5-83E2A5E1FF5C%7D">nRF Connect for Desktop</a> and following Getting Started plugin instructions.</p>
<p>Start SES and open <code>ruuvi.gateway_nrf.c.emProject</code> in <code>src</code> directory, each of the target boards is in their own project.</p>
<h2>Code style</h2>
<p>Code is formatted with <a href="http://astyle.sourceforge.net">Artistic Style</a>. Run <code>astyle --project=.astylerc ./target_file</code>.</p>
<h2>Static analysis</h2>
<p>The code can be checked with PVS Studio and Sonarcloud for some common errors, style issues and potential problems. <a href="https://ruuvi.github.io/ruuvi.gateway_nrf.c/fullhtml/index.html">Here</a> is a link to generated report which gets pushed to GitHub.</p>
<h3>PVS</h3>
<p>Obtain license and software from <a href="https://www.viva64.com/en/pvs-studio/">Viva64</a>.</p>
<p>Make runs PVS Studio scan and outputs results under doxygen/html/fullhtml.</p>
<p>This results into hundreds of warnings, it is up to you to filter the data you're interested in. For example you probably want to filter out warnings related to 64-bit systems.</p>
<h3>Sonar scan</h3>
<p>Travis pushes the results to <a href="https://sonarcloud.io/dashboard?id=ruuvi.gateway_nrf.c">SonarCloud.IO</a>. SonarCloud uses access token which is private to Ruuvi, you'll need to fork the project and setup the SonarCloud under your own account if you wish to run Sonar Scan on your own code.</p>
<h1>Running unit tests</h1>
<h2>Ceedling</h2>
<p>Unit tests are implemented with Ceedling. Run the tests with <code>ceedling test:all</code></p>
<h1>Builds</h1>
<p>Builds are in the Github <a href="https://github.com/ruuvi/ruuvi.gateway_nrf.c/releases">project releases</a>.</p>
<h1>Developing Ruuvi Firmware</h1>
<h2>Compiling with SES</h2>
<p>Double click to select project: <code>pca10040</code> or <code>ruuvigw_nrf</code>. Select the confuguaration used to build the project. For <code>ruuvigw_nrf</code> only <code>Release</code> version buildable. Press <code>F7</code> to build and <code>F5</code> for debug, or select <code>Build</code> and <code>Debug</code> in menu.</p>
<h2>Compiling with ARMGCC</h2>
<p>Run <code>make</code> in <code>src</code> directory to build all the sources. Run <code>make clean</code> in <code>src</code> directory to clean current build.</p>
<h1>Flashing</h1>
<h2>With nrfjprog</h2>
<p>How to program nRF5x SoCs with nrfjprog you can find <a href="https://www.nordicsemi.com/Software-and-Tools/Development-Tools/nRF-Command-Line-Tools">Nordic website</a>.To get started: </p><div class="fragment"><div class="line">nrfjprog --eraseall</div>
<div class="line">nrfjprog --program ruuvigw_nrf_armgcc_ruuvigw_release_vX.X.X_full.hex</div>
<div class="line">nrfjprog --reset</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
